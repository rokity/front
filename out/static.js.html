<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: static.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: static.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module static */

const extension = require('./extension');
const notFound = require('./404');
const fs = require('fs');
const path = require('path');


/**
 * Setting folder of static files and url to access to static
 * @param {String} sp the path where is located the static files
 * @param {String} su the  url for access to static folder
 */
module.exports = (sp, su) => {
  if (!sp || !su) {
    throw new Error('Cannot declare static without staticPath and staticUrl parameters');
  } else {
    this.staticPath = sp;
    this.staticUrl = su;
  }
};


/**
 * Check if the url is stastic url.
 * @param {String} url - http.ClientRequest.url or also called req.
 * @returns {Boolean} "true"" if is a static url , "false" if isn't.
 */
module.exports.isStatic = (url) => {
  if (new RegExp(`^/${this.staticUrl}/.`, 'g').test(url)) { return true; }
  return false;
};



/**
 *  Create response for static file.
 * @param {http.ClientRequest} req - http request variable
 * @param {http.ServerResponse} res - http response variable
 */
module.exports.response = (req, res) => {
  const mainDir = __dirname.substr(0, __dirname.indexOf('lib'));
  const fileName = req.url.substr(this.staticUrl.length + 1, req.url.length);
  const filePath = path.join(mainDir, this.staticPath, fileName);
  if (fs.existsSync(filePath)) {
       // Create response header
    extension(req, res);
      // Create response body
    const file = fs.readFileSync(filePath);
    res.end(file);
  } else {
    notFound(res, `&lt;h1>Path ${req.url} not found. &lt;/h1>`);
  }
};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-extensions.html">extensions</a></li><li><a href="module-front.html">front</a></li><li><a href="module-notFound.html">notFound</a></li><li><a href="module-start.html">start</a></li><li><a href="module-static.html">static</a></li><li><a href="module-switcher.html">switcher</a></li></ul><h3>Classes</h3><ul><li><a href="Route.html">Route</a></li><li><a href="Routes.html">Routes</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed May 03 2017 21:18:26 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
